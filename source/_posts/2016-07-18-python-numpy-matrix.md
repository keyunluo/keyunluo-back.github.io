---
title: Python Numpy中的矩阵
comments: true
toc: true
date: 2016-07-18 19:25:02
categories: Programming
tags : Python
keywords: Python, Numpy
mathjax: true
---

>**本节内容：**本篇博文记录Numpy的矩阵一般用法，主要学习numpy在线性代数中的应用。


<!-- more -->

## 创建矩阵

``` python
# 行与行之间用分号隔开，行内的元素之间用空格隔开
>>> import numpy as np
>>> m = np.mat('1 2 3;4 5 6;7 8 9')
>>> m
matrix([[1, 2, 3],
        [4, 5, 6],
        [7, 8, 9]])

```

## 矩阵转置

``` python
# 使用 transpose 来获取转置矩阵
>>> np.transpose(m)
matrix([[1, 4, 7],
        [2, 5, 8],
        [3, 6, 9]])
# 使用 T 属性获取转置矩阵
>>> m.T
matrix([[1, 4, 7],
        [2, 5, 8],
        [3, 6, 9]])
```

## 逆矩阵

``` python
# inv
>>> m = np.matrix('1 1 2;-1 2 0;1 1 3')
>>> np.linalg.inv(m)
matrix([[ 2.        , -0.33333333, -1.33333333],
        [ 1.        ,  0.33333333, -0.66666667],
        [-1.        ,  0.        ,  1.        ]])

# I
>>> m = np.matrix('1 1 2;-1 2 0;1 1 3')
>>> m.I
matrix([[ 2.        , -0.33333333, -1.33333333],
        [ 1.        ,  0.33333333, -0.66666667],
        [-1.        ,  0.        ,  1.        ]])
```

## 分块矩阵

``` python
>>> a = np.eye(2)
>>> b = a * 2
>>> np.bmat('a b;a b')
matrix([[ 1.,  0.,  2.,  0.],
        [ 0.,  1.,  0.,  2.],
        [ 1.,  0.,  2.,  0.],
        [ 0.,  1.,  0.,  2.]])
```

## 线性代数:numpy.linalg模块包含线性代数函数

- 常用 numpy.linglg 函数

| 函数 | 描述|
| ---- | ---- |
|diag  |  返回一个方阵的对角线（或非对角线）元素为一个一维数组，或者转换一个一维数组到一个方阵（非对角线元素为零）|
|dot |矩阵乘积|
|trace  | 计算对角线上元素的和|
|det| 计算矩阵行列式|
|eig |计算方阵的特征值和特征向量|
|inv |计算方阵的逆|
|pinv  |  计算方阵 Moore-Penrose pseudo-inverse 的转置|
|qr | 计算 QR 分解|
|svd |计算奇异值分解（SVD）|
|solve |  求解线性系统方程 Ax = b 的x，其中A是一个方阵|
|lstsq |  计算 y = Xb 的最小二乘解|

- 求解 $Ax=b$ 的线性方程组

``` python
# 1x-2y+z=0
# 2y-8z=8
# -4x+5y+9z=-9

>>> A = np.mat('1 -2 1;0 2 -8;-4 5 9')
>>> b = np.array([0,8,-9])
>>> x = np.linalg.solve(A,b)
>>> print(x)
[ 29.  16.   3.]
>>> print(np.dot(A,x))
[[ 0.  8. -9.]]

```

- 特征值和特征向量

设$A$为$n$阶矩阵，若存在常数$λ$及$n$维非零向量$x$，使得$Ax=λx$，则称$λ$是矩阵$A$的特征值，$x$是$A$属于特征值$λ$的特征向量。

``` python
>>> a =np.matrix('-1 1 0;-4 3 0;1 0 2')
>>> # eigvals()返回特征值
... np.linalg.eigvals(a)
array([ 2.,  1.,  1.])
>>> # eig()返回一个元组,第一项为特征值，第二项为对应的特征向量(按列排放)
... np.linalg.eig(a)
(array([ 2.,  1.,  1.]), matrix([[ 0.        ,  0.40824829,  0.40824829],
        [ 0.        ,  0.81649658,  0.81649658],
        [ 1.        , -0.40824829, -0.40824829]]))
>>> #2  [0,0,1]
... #1  [0.40824829,0.81649658,-0.40824829]
... #验证
... np.dot(a,[0,0,1])
matrix([[0, 0, 2]])
>>> np.dot(2,[0,0,1])
array([0, 0, 2])
>>> np.dot(a,[0.40824829,0.81649658,-0.40824829])
matrix([[ 0.40824829,  0.81649658, -0.40824829]])
>>> np.dot(1,[0.40824829,0.81649658,-0.40824829])
array([ 0.40824829,  0.81649658, -0.40824829])
```

- 奇异值分解

``` python
>>> m = np.matrix('4 11 14;8 7 -2')
>>> U,Sigma,V = np.linalg.svd(m)
>>> print(Sigma)
[ 18.97366596   9.48683298]
```

- 广义逆矩阵: 摩尔－彭若斯广义逆

``` python
>>> m = np.matrix('4 11 14;8 7 -2')
>>> n = np.linalg.pinv(m)
>>> print(m*n)
[[  1.00000000e+00  -5.41233725e-16]
 [ -8.32667268e-17   1.00000000e+00]]
#近似单位阵
```

- 行列式计算

``` python
>>> m = np.matrix('4 6;8 2')
>>> np.linalg.det(m)
-40.0
```
