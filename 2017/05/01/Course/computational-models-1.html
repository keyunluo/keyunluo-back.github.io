<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  
    
      
    

    
  

  

  
    
      
    

    
  

  
    
      
    

    
  

  
    
    
    <link href="//fonts.googleapis.com/css?family=monaco:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Lobster Two:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="递归函数论, 南京大学" />





  <link rel="alternate" href="/atom.xml" title="流光" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="本节内容：2017年研究生课程——计算模型导引第一章课后习题(习题课整理)。">
<meta property="og:type" content="article">
<meta property="og:title" content="计算模型导引——递归函数论">
<meta property="og:url" content="http://keyunluo.github.io/2017/05/01/Course/computational-models-1.html">
<meta property="og:site_name" content="流光">
<meta property="og:description" content="本节内容：2017年研究生课程——计算模型导引第一章课后习题(习题课整理)。">
<meta property="og:updated_time" content="2017-05-01T13:55:42.158Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="计算模型导引——递归函数论">
<meta name="twitter:description" content="本节内容：2017年研究生课程——计算模型导引第一章课后习题(习题课整理)。">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: 'FQBRJAIOP0',
      apiKey: '62ea038e31dd7941c12b0cd5097e4a8c',
      indexName: 'keyunindex',
      hits: {"per_page":10},
      labels: {"input_placeholder":"搜索","hits_empty":"未找到任何: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://keyunluo.github.io/2017/05/01/Course/computational-models-1.html"/>





  <title> 计算模型导引——递归函数论 | 流光 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  




<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-76470846-1', 'auto');
  ga('send', 'pageview');
</script>


  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?945b21807344d0260f24455bbd82dfea";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">流光</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">他跑啊跑啊，只为追上那个曾经被寄予厚望的自己</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-resource">
          <a href="/resource/share" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-download"></i> <br />
            
            资源
          </a>
        </li>
      
        
        <li class="menu-item menu-item-guestbook">
          <a href="/guestbook" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-comments"></i> <br />
            
            留言
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocapitalize="off" autocomplete="off" autocorrect="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://keyunluo.github.io/2017/05/01/Course/computational-models-1.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="浮舟沧海">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/resource/img/profile.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="流光">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                计算模型导引——递归函数论
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-01T14:25:02+08:00">
                2017-05-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Course/" itemprop="url" rel="index">
                    <span itemprop="name">Course</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/05/01/Course/computational-models-1.html#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/05/01/Course/computational-models-1.html" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2017/05/01/Course/computational-models-1.html" class="leancloud_visitors" data-flag-title="计算模型导引——递归函数论">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv"><i class="fa fa-file-o"></i>
            <span class="busuanzi-value" id="busuanzi_value_page_pv" ></span>
            </span>
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <blockquote>
<p><strong>本节内容：</strong>2017年研究生课程——计算模型导引第一章课后习题(习题课整理)。</p>
</blockquote>
<a id="more"></a>
<h2 id="知识点概要"><a href="#知识点概要" class="headerlink" title="知识点概要"></a>知识点概要</h2><h3 id="数论函数"><a href="#数论函数" class="headerlink" title="数论函数"></a>数论函数</h3><blockquote>
<p>以下三类数论函数称为本原函数(<strong>Initial Function, IF</strong>)</p>
<ul>
<li>零函数Z:$\mathbb{N} \rightarrow \mathbb{N}, \forall x \in \mathbb{N}.Z(x)=0$</li>
<li>后继函数S:$\mathbb{N} \rightarrow \mathbb{N}, \forall x \in \mathbb{N}.S(x)=x+1$</li>
<li>投影函数$P_i^n:\mathbb{N}^n \rightarrow \mathbb{N}, \forall x_1, x_2, \ldots, x_n \in \mathbb{N}. P_i^n(x_1, x_2, \ldots, x_n) = x_i$</li>
</ul>
</blockquote>
<p><strong>基本函数(Basic Function, BF)</strong>:</p>
<ul>
<li>$\mathcal{IF} \subseteq \mathcal{BF}$</li>
<li>$\mathcal{BF}$对复合封闭，即对任意的$m,n \in \mathbb{N}^+, f:\mathbb{N}^m \rightarrow \mathbb{N}, g_1, g_2, \ldots, g_m:\mathbb{N}^n \rightarrow \mathbb{N}, \ 若 \ f, g_1, \ldots, g_m \in \mathcal{BF},\ 则 \ Comp_m^n[f,g_1, \ldots, g_m] \in \mathcal{BF} $</li>
</ul>
<h3 id="配对函数"><a href="#配对函数" class="headerlink" title="配对函数"></a>配对函数</h3><blockquote>
<p>设$pg(x,y):\mathbb{N}^2 \rightarrow \mathbb{N}, K(x): \mathbb{N} \rightarrow \mathbb{N}, L(x):\mathbb{N} \rightarrow \mathbb{N}$为数论函数， 若它们对任意的$x,y \in \mathbb{N}$, 满足：$K(pg(x,y)) = x, L(pg(x,y)) = y$, 则称pg为配对函数， K和L分别称为左函数、右函数，{pg, K, L}称为配对组。</p>
</blockquote>
<h3 id="初等函数"><a href="#初等函数" class="headerlink" title="初等函数"></a>初等函数</h3><blockquote>
<p>初等函数(Elementary Function)类$\mathcal{EF}$是满足以下条件的最小集：</p>
<ul>
<li>$\mathcal{IF} \subseteq \mathcal{EF}$</li>
<li>$x+y, x\ddot{-}y, x × y， \left \lfloor x/y \right \rfloor \in \mathcal{EF}$</li>
<li>$\mathcal{EF}$对于复合、有界迭加算子$\Sigma[ \cdot ]$和有界迭乘算子$\prod[\cdot ]$封闭</li>
</ul>
</blockquote>
<h3 id="原始递归函数"><a href="#原始递归函数" class="headerlink" title="原始递归函数"></a>原始递归函数</h3><blockquote>
<p>(1)设$n \in \mathbb{N}^+, f:\mathbb{N}^n \rightarrow \mathbb{N}, g:\mathbb{N}^{n+2} \rightarrow \mathbb{N}$, 定义函数$h: \mathbb{N}^{n+1} \rightarrow \mathbb{N}$如下：$h(\vec{x}, 0) = f(\vec{x}), h(\vec{x}, y+1) = g(\vec{x}, y, h(\vec{x}, y))$称h由f和g经带参原始递归算子$Prim^n[\cdot, \cdot]$而得，记作$h=Prim^n[f,g]$.
(2)设$a\in \mathbb{N}, g:\mathbb{N}^2 \rightarrow \mathbb{N},$ 定义函数$h:\mathbb{N} \rightarrow \mathbb{N}$如下：$h(0) = a, h(y+1) = g(y, h(y))$, 这时则称h由g经无参原始递归算子$Prim^0[\cdot, \cdot]$而得，记作$h=Prim^0[a,g]$</p>
</blockquote>
<p><strong>原始递归函数(Primitive Recursive Functions, PRF)</strong>:</p>
<ul>
<li>$\mathcal{IF} \subseteq \mathcal{BF}$</li>
<li>$\mathcal{PRF}$对于复合、带参原始递归算子和无参原始递归算子封闭。</li>
</ul>
<h3 id="递归函数"><a href="#递归函数" class="headerlink" title="递归函数"></a>递归函数</h3><blockquote>
<p>一般递归函数<strong>(General Recursive Functions,GRF)</strong>为满足如下条件的最小集合：</p>
<ul>
<li>$\mathcal{IF} \subseteq \mathcal{GRF}$</li>
<li>$\mathcal{GRF}$对于复合和原始递归算子封闭</li>
<li>$\mathcal{GRF}$对于正则$\mu-$算子封闭</li>
</ul>
</blockquote>
<h2 id="习题"><a href="#习题" class="headerlink" title="习题"></a>习题</h2><h3 id="1-1"><a href="#1-1" class="headerlink" title="1.1"></a>1.1</h3><blockquote>
<p>证明： 对于固定的$k$, 一元数论函数 $x+k \in \mathcal{BF}$</p>
</blockquote>
<p>解答：
$x + 0 = P_1^1 \in \mathcal{BF}, x + k = \underbrace{S ◦ S ◦ \ldots ◦ S}_{k-1 \ 次}  = S^{k-1}(x) \in \mathcal{BF}, \forall k &gt; 1$, 故结论成立。</p>
<h3 id="1-2"><a href="#1-2" class="headerlink" title="1.2"></a>1.2</h3><blockquote>
<p>证明：对任意 $k \in \mathbb{N}^{+}$$，$$f: \mathbb{N}^k \rightarrow \mathbb{N}$，若 $f \in \mathcal{BF}$，则存在 $h$，使得 $f(\vec{x}) &lt; |\vec{x}|+h$
其中$|\vec{x}| = \max{x_i; 1\leq i \leq k}.$</p>
</blockquote>
<p>解答：设$f \in \mathcal{BF}$</p>
<ul>
<li>case 1：如果 $f$ 为零函数 $Z$，后继函数 $S$，或投影函数$P_i^n$ 之一，
$Z(x) &lt; x+1, \quad S(x)&lt;x+2, \quad P_i^n(\vec{x})&lt;|\vec{x}|+1$
显然存在这样的 $h$；</li>
<li>case 2：设 $f(\vec{x}) = g(g_1(\vec{x}), g_2(\vec{x}), \cdots, g_m(\vec{x}))$
设 $g(\vec{y}) &lt; |\vec{y}| + h_0，g_i(\vec{x_i}) &lt; |\vec{x}|+h_i\ (i = 1,2,3, \cdots, m)$
从而$f(\vec{x}) &lt; \max_{1\leq i \leq m} g_i(\vec{x}) + h_0&lt;\max_{1\leq i \leq m}(|\vec{x}|+ h_i) + h_0 &lt; |\vec{x}|+ h_0+h_1+ \cdots + h_m$
取 $h = h_0+h_1+ \cdots + h_m$ 即可。</li>
</ul>
<h3 id="1-3"><a href="#1-3" class="headerlink" title="1.3"></a>1.3</h3><blockquote>
<p>证明：二元数论函数 $x+y \notin \mathcal{BF}$</p>
</blockquote>
<p>解答： 假设$ x+y \in \mathcal{BF}$, 根据上述习题1.2， 从而有h使得$x + y &lt; \max (x,y) + h$, 令$x=y=h+1$, 得到$2h+2 &lt; 2h+1$矛盾， 故假设不成立。</p>
<h3 id="1-4"><a href="#1-4" class="headerlink" title="1.4"></a>1.4</h3><blockquote>
<p>证明：二元数论函数 $x \dot{-}y \notin \mathcal{BF}$.</p>
</blockquote>
<p>解答： 假设$x \dot{-} y \in \mathcal{BF}$, 从而$x\dot{-}1 \in \mathcal{BF}$， 然而$f(x) \in \mathcal{BF}\ 时，f(x)\geq 0 \ 或 \ =0$，得出矛盾！</p>
<h3 id="1-5"><a href="#1-5" class="headerlink" title="1.5"></a>1.5</h3><blockquote>
<p>设 $pg(x, y) = 2^x(2y+1)\dot{-}1$，证明：存在初等函数 $K(z)$ 和 $ L(z)$ 使得
$$
K(pg(x,y))=x, L(pg(x,y))=y, pg(K(x), L(y)) = z.
$$</p>
</blockquote>
<p>解答：$z = 2^x(2y+1) \dot{-}1,\ iff\  z+1 = 2^x(2y+1), \ iff\ x = ep_0(z+1), 且 \ 2y +1 = \frac{z+1}{2^x}$, 带人x, 得$2y+1 = \left[\frac{z+1}{2^{\text{ep}_0(z+1)}}\right], \ iff \ x = K(z), 且 \ y=L(z)$, 这里$K(z) = ep_0(z+1), L(z) = \left[\frac{\left[\frac{z+1}{2^{\text{ep}_0(z+1)}}\right]\dot{-}1}{2}\right]$</p>
<h3 id="1-6"><a href="#1-6" class="headerlink" title="1.6"></a>1.6</h3><blockquote>
<p>设 $f: \mathbb{N} \rightarrow \mathbb{N}$，证明：$f$ 可以作为配对函数的左函数当且仅当对任何 $i \in \mathbb{N}$，
$|\ {\ x\in \mathbb{N}: f(x)=i\ }\ | = \aleph_0.$</p>
</blockquote>
<p>解答：</p>
<ul>
<li>“$\Rightarrow$”，设 $f$ 为配对函数 $pg(x,y)$ 的左函数
$\because f(pg(i, j)) = i,  \forall j$
从而对任何 $i \in \mathbb{N}$，$\therefore {\ x\ |\ f(x) = i\ } \supseteq {\ pg(i,j) \ |\  j \in \mathbb{N}\ } \sim {\ j \ | \ j \in \mathbb{N}\ } \sim \mathbb{N}$
因此，${\ x\ |\ f(x) = i\ }$ 无穷。</li>
</ul>
<ul>
<li><p>“$\Leftarrow$”，设任何 $i \in \mathbb{N}$，$f^{-1}[{i}]$ 无穷，
$\because \mathbb{N}$ 良序，
$\therefore$ 可设 $f^{-1}[{i}] = {\ a_{ij}\  |\ j \in \mathbb{N}\ }$
$g: \mathbb{N} \rightarrow \mathbb{N}$ 定义如下：</p>
<p>$$
g(x) =
\begin{cases}
j, &amp; \text{if } x = a_{ij} \\
0, &amp; \text{else}
\end{cases}
$$
从而对任何 $i,j \in \mathbb{N}$，$f(a_{ij}) = i$，$g(a_{ij}) = j$，</p>
<p>令 $pg(i, j) = a_{ij}$，$f$ 即为左函数。</p>
</li>
</ul>
<h3 id="1-7"><a href="#1-7" class="headerlink" title="1.7"></a>1.7</h3><blockquote>
<p>证明：从本原函数出发，经复合和算子 $\prod\limits_{i=n}^{m}[\cdot]$ 可以生成所有的初等函数，这里</p>
</blockquote>
<p>$$
\prod\limits_{i=n}^{m}[f(\vec{i})] =
\begin{cases}
f(n) \cdot f(n-1) \cdot\ \cdots \ \cdot f(m), &amp; \text{if } m\geq n\\
1, &amp; \text{if } m &lt; n
\end{cases}
$$</p>
<p>解答：</p>
<p>只需证 $\sum\limits_{i=0}^n$ ， $\prod\limits_{i=0}^n$ 和函数 $\ddot{-}$ 可表示出。</p>
<ol>
<li>$\prod\limits_{i=0}^n$ 为 $\prod\limits_{i=n}^{m}$ 的特例，取 $n=0$ 即可；</li>
<li>$x^y = \prod\limits_{i=1}^{y}P_1^1(x)$，从而 $2^y = \prod\limits_{i=1}^{y}SSZ(i)$；</li>
<li>$N(x) = \prod\limits_{i=1}^{x}Z(i)$ ；</li>
<li>$\text{leq}(x,y) = \prod\limits_{i=x}^{y}Z(i) = \begin{cases}0, &amp; \text{if } x \leq y \\
1, &amp; \text{if } x &gt; y\end{cases}$</li>
<li>$\text{geq}(x, y) = \prod\limits_{i=y}^{x} Z(i)= \begin{cases}0, &amp; \text{if } x \geq y \\
1, &amp; \text{if } x &lt; y
\end{cases}$</li>
<li><p>$\text{eq}(x,y) = \text{leq}(x,y)^{N\text{geq}(x,y)}=\begin{cases}0, &amp; \text{if } x = y \\
1, &amp; \text{if } x \neq y
\end{cases}$</p>
</li>
<li><p>$\log(x) = \prod\limits_{i=0}^x i^{N \text{ eq}(2^i,x)}$
注意：$\log(2^y) = \prod\limits_{i=0}^{2^y}i^{N\text{ eq}(2^i, 2^y)}$</p>
</li>
<li>$\sum\limits_{i=n}^{m} f(i, \vec{x}) = \log(2^{\sum_{i=n}^mf(i, \vec{x})}) = \log(\prod\limits_{i=n}^{m}2^{f(i, \vec{x})})$</li>
<li>$x \cdot y = \sum\limits_{i=1}^{x}P_1^1(y)$</li>
<li>$x+y = \log(2^x \cdot 2^y)$</li>
<li>$x \ddot{-} y = \left(\sum\limits_{i=y+1}^{x}SZ(i)\right) + \left(\sum\limits_{i=x+1}^{y}SZ(i)\right)$</li>
</ol>
<h3 id="1-8"><a href="#1-8" class="headerlink" title="1.8"></a>1.8</h3><blockquote>
<p>设
$$
M(x) =
\begin{cases}
M(M(x+11)), &amp; \text{if } x \leq 100, \\
x-10, &amp; \text{if } x&gt;100,
\end{cases}
$$
证明：
$$
M(x) =
\begin{cases}
91, &amp; \text{if } x \leq 100, \\
x-10, &amp; \text{else.}
\end{cases}
$$</p>
</blockquote>
<p>解答：
只需证，当 $0\leq x \leq 100$$ 时，$$M(x) = 91$</p>
<ul>
<li>$M(90) = M(M(101))=M(91)=M(92) = \cdots = M(100) = M(M(111))=M(101)=91$；</li>
<li>当 $0\leq x \leq 100$ 时，存在 $k$ 使得 $90 \leq x+11k \leq 100$，从而 $M(x) = M^2(x+1*11)= M^{k+1}(x+11k) = M^kM(x+11k)=M^k(91) = 91$。</li>
</ul>
<h3 id="1-9"><a href="#1-9" class="headerlink" title="1.9"></a>1.9</h3><blockquote>
<p>证明：
$$
\min x \leq n. [f(x, \vec{y})] = n \dot{-}\max x \leq n. [f(n \dot{-}x, \vec{y})], \\
\max x \leq n. [f(x, \vec{y})] = n \dot{-}\min x \leq n. [f(n \dot{-}x, \vec{y})].
$$</p>
</blockquote>
<p>解答：</p>
<ul>
<li>case 1: $f(x)\ 在 \ [0, n]$ 中有零点。
设 $\min{x\leq n.}[f(x)] = k$，故 $f(k) = 0$，从而 $f(n \dot{-}(n\dot{-}k)) = 0$，$n-k$ 为 $g(x) = f(n\dot{-}x)$ 的零点。
当 $k$ 为 $f(x)$ 的最小零点时，$n \dot{-} k$ 为 $g(x)$ 的最大零点，从而$n \dot{-} k = \max{x \leq n}. [f(n\dot{-}x)]$
因此，$k = n \dot{-} \max{x\leq n}. [f(n \dot{-}x)]</li>
<li>case 2: $f(x)$ 在 $[0, n]$ 中无零点，等式左边$=n$，右边$=n\dot{-}0=n$，相等。
同理，可证 $\max x \leq n. [f(x, \vec{y})] = n \dot{-}\min x \leq n. [f(n \dot{-}x, \vec{y})].$</li>
</ul>
<h3 id="1-10"><a href="#1-10" class="headerlink" title="1.10"></a>1.10</h3><blockquote>
<p>证明：$\mathcal{EF}$ 对有界 $\max$-算子封闭.</p>
</blockquote>
<p>解答：
$\because \max x \leq n. f(x, \vec{y}) = n \dot{-} \min x\leq n. f(n \dot{-}x, \vec{y})$ (习题 1.9)
$\therefore \mathcal{EF}$ 对有界 $\max$-算子封闭.</p>
<h3 id="1-11"><a href="#1-11" class="headerlink" title="1.11"></a>1.11</h3><blockquote>
<p>Euler 函数 $\varphi : \mathbb{N} \rightarrow \mathbb{N}$ 定义为
$\varphi(n) = |{\ x: 0&lt;x\leq n \wedge \gcd(x,n) = 1\ }|,$
即 $\varphi(n)$ 表示小于等于$n$ 且与 $n$ 互素的正整数个数，例如 $\varphi(1)=1$，因为 1 与其本身互素；$\varphi(9) = 6$，因为 9 与 1, 2, 4, 5, 7, 8 互素。证明：$\varphi \in \mathcal{EF}$.</p>
</blockquote>
<p>解答：
我们有 $\varphi(n) = n \prod\limits_{p\ \vert \ n}(1- \frac{1}{p})$
$\because \prod\limits_{p\ \vert \ n} p = \prod\limits_{i=0}^n\ \text{ IF } \  P_i|n \ \text{ THEN }\ P_i \ \text{ ELSE }\ 1$
$=\prod\limits_{i=0}^n\ \text{ IF } \  \text{ep}_i \geq 1 \ \text{ THEN }\ P_i \ \text{ ELSE }\ 1$
$=\prod\limits_{i=0}^n(P_iN(1\dot{-} \text{ep}_i(n))+N^2(1\dot{-}\text{ep}_i(n))) \in \mathcal{EF}$
同理，$\prod\limits_{p\ \vert \ n} (p-1) =\prod\limits_{i=0}^n((P_i-1)N(1\dot{-} \text{ep}_i(n))+N^2(1\dot{-}\text{ep}_i(n))) \in \mathcal{EF} $
$\therefore \varphi(n) = N(n\dot{-}1)+N^2(n \dot{-}1)\left[\dfrac{\prod\limits_{p\ \vert \ n} (p-1)}{\prod\limits_{p\ \vert \ n} p}\right] \in \mathcal{EF}$.</p>
<h3 id="1-12"><a href="#1-12" class="headerlink" title="1.12"></a>1.12</h3><blockquote>
<p>设 $h(x)$ 为 $x$ 的最大素因子的下标，约定 $h(0)=0, h(1) = 0$。例如 $h(88) = 4$，因为 $88=2^3 \times 11$ 的最大素因子 11 是第 4 个素数 $p_4$，其下标为 4。证明：$h \in \mathcal{EF}$。</p>
</blockquote>
<p>解答：$h(0)=h(1) = 0$，当 $x \geq 2$ 时：</p>
<p>$\because h(x) = \max y\leq x. [\text{ep}_y{x} \geq 1]$
$h(x) = \max y \leq x. [1 \dot{-}\text{ep}_y(x)]$
$\therefore h \in \mathcal{EF}$</p>
<h3 id="1-13"><a href="#1-13" class="headerlink" title="1.13"></a>1.13</h3><blockquote>
<p>设 $f:\mathbb{N} \rightarrow \mathbb{N}$ 满足$f(0) = 1, f(1) = 1,f(x+2) =f(x)+f(x+1)$
证明：
(1) $f \in \mathcal{PRF}$；
(2) $f \in \mathcal{EF}$。</p>
</blockquote>
<p>解答：
(1) 令$[a_0, a_1, \cdots, a_n] \prod\limits_{i=0}^{n} p_i^{a_i}$
这里 $p_i$ 为第 $i$ 个素数，比如$p_0=2，p_1=3，p_2=5$，那么 $[a_0, a_1, a_2] = 2^{a_0} \cdot 3^{a_1} \cdot 5^{a_2}$，为 Gödel 编码形式$ep_i(a) = a$ 的素因子分解式中第 $i$ 个素数的指数。易见
$$
ep_i[a_0, a_1, \cdots, a_n] =
\begin{cases}
 a_i, &amp; i\leq n \\
0, &amp; i&gt;n
\end{cases}
$$
从而令 $F(n) = [f(n), f(n+1)]，F(0) = [f(0), f(1)] = 2^1 \cdot 3^1 = 6$
$$
\begin{array}{rl} F(n+1) &amp; = [f(n+1), f(n+2)]\\
&amp; = [f(n+1), f(n+1)+f(n)] \\
&amp; = [ep_1F(n), ep_1F(n)+ep_0F(n)] \\
&amp; = H(F(n))\end{array}
$$
这里，$$H(x) = [ep_1x, ep_1x+ep_0x] = 2^{ep_1x} \cdot 3^{ep_1x} \cdot 3^{ep_0x}$$</p>
<p>$\therefore H(x)$ 是初等的。
又 $\because F(0)=6, F(n+1) = H(F(n))$ ，以及 $H$ 为原始递归函数
$\therefore F(n)$ 为原始递归函数
又 $\because f(n)=ep_0F(x)$
$\therefore f(n)$ 为原始递归函数。</p>
<p>(2) 现在证明 $f(n)$ 是初等的。</p>
<p><u><strong>证法一：</strong></u></p>
<p>首先有 $f(n) \leq 2^n$ ，归纳证明如下：
当 $n=0,1$ 时，$f(0)=1 \leq 2^0 ，f(1) = 1 \leq 2^1$
归纳假设：$\forall k \leq n, f(k) \leq 2^k$
归纳步骤：当 $n&lt;2$ 时，$f(n) \leq 2^n$ 为真，当 $ n \geq 2$ 时，
$f(n) = f(n-1)+f(n-2) \leq 2^{n-1} +2^{n-2} \leq 2^{n-2} \cdot 3 \leq 2^{n-2} \cdot 4 \leq 2^n$</p>
<p>其次，还有 $F(n) \leq G(n)$ ，这里 $G(n) = 2^{2^n}\cdot 3^{2^{n+1}}$，且 $G(n)$ 是初等的。</p>
<p>$F(n) = [f(n), f(n+1)] = 2^{f(n)} \cdot 3^{f(n+1)} \leq  2^{2^n}\cdot 3^{2^{n+1}} = G(n)$，易见 $G(n)$ 的初等性。</p>
<p>令$\alpha(n) = [F(0), \cdots, F(n)] \leq [G(0), \cdots, G(n)]$，有
$\alpha(n) \leq \prod\limits_{i=0}^np_i^{G(i)} \leq \prod\limits_{i=0}^np_n^{(2^{2^n}\cdot 3^{2^{n+1}} \cdot (n+1))} = \beta(n)
$
易见，$\beta(n)$ 为初等函数。
因为
$$
\begin{array}{rl}\alpha(n)  &amp; = \mu x \leq \beta(n) \cdot (ep0x = F(0)) \wedge \forall i&lt;n, ep{i+1}x = H(ep_ix)  \
 &amp; = \mu x \leq \beta(n) \cdot[ep_0x=6 \wedge \forall i &lt;n , (ep_{i+1}x \ddot{-}H(ep_ix)=0)] \
  &amp;= \mu x \leq \beta(n) \cdot\left[ep_0x=6 + \sum_{i \rightarrow n \ddot{-}1}(ep_{i+1}x\ddot{-}H(ep_ix))N^2n\right] \
   &amp; = \mu x \leq \beta(n) \cdot \gamma(n)
\end{array}
$$
易见，$\gamma(n)$ 是初等的，所以 $\alpha(n)$ 是初等的。
因为 $f(n) = ep_0(F(n)) = ep_0(ep_n(\alpha(n)))$，所以 $f(n)$ 是初等的。</p>
<p><strong><u>证法二：</u></strong>
$f(n) = \frac{1}{\sqrt{5}}\left(\frac{1+\sqrt{5}}{2}\right)^{n+1} - \frac{1}{\sqrt{5}}\left(\frac{1-\sqrt{5}}{2}\right)^{n+1}
$
（该公式的证明参见 Kolman B, Busby R C. Ross S. Discrete mathematical structures. Prentice-Hall, Inc. 1996 (3rd) ）</p>
<p>从而
$$
\begin{array}{rl}f(n) &amp; = \frac{1}{2^{n+1}\sqrt5}\left[(1+\sqrt 5)^{n+1} - (1-\sqrt 5)^{n+1}\right] \\
&amp; = \frac{1}{2^{n+1}\sqrt5}\left[\sum_{i=0}^{n+1}C_{n+1}^i (\sqrt 5)^i - \sum_{i=0}^{n+1}C_{n+1}^i (-\sqrt 5)^i \right] \\
&amp; = \frac{1}{2^{n+1}\sqrt5}\left[\sum_{i=0}^{n+1}C_{n+1}^i 2(\sqrt 5)^i N^2rs(i,2) \right] \\
&amp; = \frac{1}{2^{n}}\left[\sum_{i=0}^{n+1}C_{n+1}^i 5^{\lfloor\frac{i}{2}\rfloor} N^2rs(i,2) \right] \\
\end{array}
$$</p>
<h3 id="1-14"><a href="#1-14" class="headerlink" title="1.14"></a>1.14</h3><blockquote>
<p>设数论谓词 $Q(x,y,z,v)$ 定义为
$Q(x, y, z, v) \equiv p(\langle x,y,z\rangle) ~|~ v,$其中，$p(n)$ 表示第 $n$ 个素数，$\langle x,y,z\rangle$ 是 $x,y,z$ 的 Godel 编码。证明：$Q(x,y,z,v)$ 是初等的。</p>
</blockquote>
<p>解答：$\because \langle x,y,z\rangle= 2^x \cdot 3^y \cdot 5^z \in \mathcal{EF} $
又 $Q(x,y,z,v)$ 的特征函数为 $N^2rs(v, p(\langle x,y,z\rangle))$
$\therefore Q \in \mathcal{EF}$</p>
<h3 id="1-15"><a href="#1-15" class="headerlink" title="1.15"></a>1.15</h3><blockquote>
<p>设 $f:\mathbb{N} \rightarrow \mathbb{N}$ 满足
$f(0) = 1,f(1) = 4,f(2)=6, f(x+3) = f(x)+(f(x+1))^2+(f(x+2))^3$
证明：$f(x) \in \mathcal{PRF}$。</p>
</blockquote>
<p>解答：
令 $g(x) = \langle f(x), f(x+1), f(x+2) \rangle, f(x) = (g(x))_1$
$g(0) = \langle 1, 4, 6 \rangle$，
$g(x+1) = \langle (g(x))_2, (g(x))_3, (g(x))_1+(g(x))_2^2+(g(x))_3^3 \rangle = B(g(x)) $
这里，$B(z) = \langle (z)_2, (z)_3, (z)_1+((z)_2)^2+((z)_3)^3 \rangle \in \mathcal{PRF}$
故 $g \in \mathcal{PRF}$，从而 $f \in \mathcal{PRF}$。</p>
<h3 id="1-16"><a href="#1-16" class="headerlink" title="1.16"></a>1.16</h3><blockquote>
<p>设 $f: \mathbb{N}\rightarrow \mathbb{N}$ 满足
$f(0)=0,f(1) = 1,f(2) = 2^2,f(3) = 3^{3^3} \cdots \cdots,
f(n) = n^{.^{.^{.^n}}} (\text{the number of } n \text{ is } n) $
证明：$f \in \mathcal{PRF} - \mathcal{EF}$</p>
</blockquote>
<p>解答：</p>
<p>令 $g(m,n) = n^{.^{.^{.^n}}}$，具有 $m$ 个 $n$ 的形式，
$$
\begin{cases}
 g(0, n) = N^2n \\
 g(m+1, n) = n^{g(m,n)}
 \end{cases}
 $$，从而 $f(n) = g(n, n)$
$\because g \in \mathcal{PRF}$
$\therefore f \in \mathcal{PRF}$
以下证 $ f \notin \mathcal{EF}$
从而 $\exists k ~\forall n, f(n) &lt; 2^{.^{.^{.^{2^n}}}} } k$ 个 2，取 $n = k+2$，从而
$(k+2)^{.^{.^{.^{(k+2)}}}} }k+2$ 个 $&lt; 2^{.^{.^{.^{2^{(k+2)}}}}} }k$ 个 2，矛盾。</p>
<h3 id="1-17"><a href="#1-17" class="headerlink" title="1.17"></a>1.17</h3><p>设 $g: \mathbb{N}\rightarrow \mathbb{N} \in \mathcal{PRF}, f: \mathbb{N}^2 \rightarrow \mathbb{N}$ ，满足
$
f(x, 0)=g(x)， f(x,y+1) = f(f(\cdots f(f(x,y), y-1), \cdots),0),$
证明：$f \in \mathcal{PRF}$</p>
<p>解答：
证明 $f(x,y)$ 呈形 $g^{a(y)}(x)$
Basis: $ y = 0, f(x,y) = f(x,0) = g(x), a(0) = 1$
假设 $f(x,y) = g^{a(y)}(x)$，那么，
$$
\begin{array}{rl}
f(x, y+1) &amp;=f(f(\cdots f(f(x,y), y-1), \cdots), 0) \\
&amp; = g^{a(0)}(f(\cdots f(f(x,y), y-1), \cdots), 1) \\
&amp; = g^{a(0)+a(1)}(f(\cdots f(f(x,y), y-1), \cdots), 2) \\
&amp; = g^{a(0)+a(1)+ \cdots a(n)}(x)
\end{array}
$$
从而，$a(0)=1, a(y+1) = a(0)+a(1)+\cdots +a(y)$
易见 $a(y) \in \mathcal{PRF}$，故 $f(x,y) = g^{a(y)} (x)$
令 $h(x,y) = g^y(x)$，因为
$$
\begin{cases}
h(x, 0) = x \\
h(x, y+1) = g(h(x,y))
\end{cases}
$$</p>
<p>$\therefore h \in \mathcal{PRF}$
$\because f(x,y)= h(x, a(y))$
$\therefore f \in \mathcal{PRF}$</p>
<h3 id="1-18"><a href="#1-18" class="headerlink" title="1.18"></a>1.18</h3><blockquote>
<p>设 $k \in \mathbb{N}^+$，函数 $f: \mathbb{N}^ k\rightarrow \mathbb{N}$ 和 $g: \mathbb{N}^k \rightarrow \mathbb{N}$尽在有穷个点取不同值，证明：$f $ 为递归函数当且仅当 $g$ 为递归函数。</p>
</blockquote>
<p>解答：
设 $f$ 与 $g$ 在有穷个点取不同值，从而有 $k \in \mathbb{N}$，使当 $x &gt; k$ 时，$f(x) =g(x)$ ，从而，</p>
<p>$$
f(x) =
\begin{cases}
f(x), &amp; \text{if } x \leq k\\
g(x), &amp; \text{if } x &gt;k
\end{cases}
$$
令
$$
f^\prime(x) =
\begin{cases}
f(x), &amp; \text{if }x \leq k\\
0, &amp;\text{if }x &gt; k
\end{cases}
$$
易见，$f^\prime \in \mathcal{PRF}$
$f(x) = f^\prime(x)N(x\dot{-}k) + g(x)N^2(x\dot{-}k)$
易见，$g \in \mathcal{PRF} \Rightarrow f \in \mathcal{PRF}$
同理，$f \in \mathcal{PRF} \Rightarrow g\in \mathcal{PRF}$</p>
<h3 id="1-19"><a href="#1-19" class="headerlink" title="1.19"></a>1.19</h3><blockquote>
<p>证明：$f(n) = \Bigl\lfloor\left(\frac{\sqrt{5}+1}{2}\right)n\Bigr\rfloor$
为初等函数。</p>
</blockquote>
<p>解答：
$f(n) = \max x \leq 2n. x \leq \frac{\sqrt{5}+1}{2}n$
$f(n) = \max x \leq 2n. 2x \leq \sqrt{5} n+n$
$f(n) = \max x \leq 2n. 2x \ddot{-}n \leq \sqrt{5}n$
$f(n) = \max x \leq 2n. (2x \ddot{-}n)^2 \leq 5n^2$
$f(n) = \max x \leq 2n. 4x^2  \leq 4n^2 + 4xn$
$f(n) = \max x \leq 2n. x^2 \dot{-} (n^2 + xn) \in \mathcal{EF}$</p>
<h3 id="1-20"><a href="#1-20" class="headerlink" title="1.20"></a>1.20</h3><blockquote>
<p>证明：$Ack(4,n) \in \mathcal{PRF} - \mathcal{EF}$，其中 $Ack(x,y)$ 是 Ackermann 函数。</p>
</blockquote>
<p>解答：
令 $f(n) = Ack(4,n)$，
$f(0) = Ack(4,0) = Ack(3,1) = f_3(1)=2^{1+3}-3=13$
$f(n+1) = Ack(4, n+1) = Ack(3, A(4,n)) = Ack(3, f(n)) = 2^{f(n)+3}\dot{-}3$
令 $g(n) = f(n)+3$，从而$g(0) = 16 = 2^4$，$g(n+1) = g(n)$</p>
<p>因此，$g(n) = \left . 2^{\cdot^{\cdot^{\cdot^2}}}  \right \} n+3 $ 个2.</p>
<p>从而，$Ack(4,n) = 2^{\cdot^{\cdot^{\cdot^2}}} \dot{-}3 \in \mathcal{PRF}$</p>
<p>又因为：
$\lim \limits_{n \rightarrow \infty} \frac{\left. 2^{\cdot^{\cdot^{\cdot^2}}}  \right\} k \text{ 个 }2}{g(n)} = 0$</p>
<p>$\therefore g \notin \mathcal{EF}$，$\therefore f \notin \mathcal{EF}$ 。</p>
<h3 id="1-21"><a href="#1-21" class="headerlink" title="1.21"></a>1.21</h3><blockquote>
<p>设 $f: \mathbb{N} \rightarrow \mathbb{N}$，$f$ 为单射（1-1）且满射（onto），证明：$f\in \mathcal{GRF} \Leftrightarrow f^{-1} \in \mathcal{GRF}$</p>
</blockquote>
<p>解答：
设 $f$ 为单射且满射，令 $g(x) =f^{-1}(x)$，从而
$y=g(x) \text{ iff } f(y) = x \text{ iff } y = \mu z. f(z) = x$
从而，$g(x) = \mu z. (f(z) \ddot{-}z)$
因此，$g \in \mathcal{GRF} \Leftarrow f \in \mathcal{GRF}$
同理，$f\in \mathcal{GRF} \Leftarrow g \in \mathcal{GRF}$</p>
<h3 id="1-22"><a href="#1-22" class="headerlink" title="1.22"></a>1.22</h3><blockquote>
<p>设 $p(x)$ 为整系数多项式，令 $f: \mathbb{N} \rightarrow \mathbb{N}$ 定义为 $f(a) = p(x)-a$ 对于 $x$ 的非负整数根，证明：$f \in \mathcal{RF}$。</p>
</blockquote>
<p>解答：
$f(n) = \mu x. (p(x) = n), \because p(x)$ 为整系数多项式, $\therefore$ 存在正整系数多项式 $s(x)$ 与 $t(x)$ 使 $p(x) = s(x)-t(x)$,从而$f(n) = \mu x. (s(x) \ddot{-} (n+t(x)))$. 易见，$s(x), t(x) \in \mathcal{PRF}$，故 $f \in \mathcal{RF}$。</p>
<h3 id="1-23"><a href="#1-23" class="headerlink" title="1.23"></a>1.23</h3><blockquote>
<p>设
$$
f(x) =
\begin{cases}
x / y, &amp; \text{if } y \neq 0 \text{ and } y~|~x,\\
\uparrow, &amp; \text{else.}
\end{cases}
$$
证明：$f \in \mathcal{RF}$。</p>
</blockquote>
<p>解答：$f(x) = \mu z. (zy =x) \text{ and } (y \neq 0) = \mu z.(x \ddot{-}zy)\cdot Ny$</p>
<h3 id="1-24"><a href="#1-24" class="headerlink" title="1.24"></a>1.24</h3><blockquote>
<p>设 $g: \mathbb{N} \rightarrow \mathbb{N}$ 满足
$g(0)=0,g(1) = 1,g(n+2) = rs((2002g(n+1)+2003g(n)), 2005)$
(1) 试求 $g(2006)$，
(2) 证明：$g \in \mathcal{EF}$。</p>
</blockquote>
<p>解答：</p>
<p>先证明(2)，令 $h: \mathbb{N} \rightarrow \mathbb{Z}$ 如下：
$h(0) = 0,h(1) = 1,h(n+2) = -3h(n+1)-2h(n)$
易见 $g(n) = rs(h(n), 2005)$
(注：为何这样构造？$g(n+2) = rs((2005-3)g(n+1)+(2005-2)g(n), 2005) $)</p>
<p>这是因为 $h(n)$ 的特征方程 $\lambda^2= -3\lambda-2$，其根为 $-1, -2$，从而 $h(n)$ 呈形 $a(-1)^n+b(-2)^n$，由 $h(0)=0, h(1) = 1$，故得 $a = 1, b = -1$，因此 $h(n) = (-1)^n-(-2)^n = (-1)^{n+1}(2^n \dot{-}1)$</p>
<p>从而，</p>
<p>$$g(n) =
\begin{cases}
2005 \dot{-} rs(2^n \dot{-}1, 2005), &amp; \text{if } n \text{ is even,}\\
rs(2^n \dot{-}1, 2005), &amp; \text{if } n \text{ is odd.}
\end{cases}$$</p>
<p>$g(n) = (2005 \dot{-}rs(2^n\dot{-}1, 2005) Nrs(n,2)) + rs(2^n\dot{-}1, 2005)N^2rs(n,2)$
故 $g \in \mathcal{EF}$。
再计算(1)，$2005 = 5 \times 401$，$5, 401$ 均为素数</p>
<p>由Fermat’s little theorem（费马小定理：假如 $p$ 是素数，且 $(a,p) =1$，那么 $a^{p-1} \equiv 1 (\text{mod } p)$)知，
$2^4 \equiv 1 \mod 5, 2^{400} \equiv 1 \mod 401$
$\because (5, 401) = 1, \therefore 2^{400} \equiv 1(\text{mod }5 \times 401)$$，即 $$rs(2^{400}, 2005) = 1$
从而，$g(n+400) = g(n)$，$g$ 的周期为 $400$
故 $g(2006) = g(6) = rs(h(6), 2005)) = 2005 \dot{-} rs(2^6-1, 2005) = 1942$。</p>
<h3 id="1-25"><a href="#1-25" class="headerlink" title="1.25"></a>1.25</h3><blockquote>
<p>设 $f: \mathbb{N} \rightarrow \mathbb{N}$ 定义为
$f(n)=\pi \text{ 的十进制展开式中第 }n\text{ 位数字}$
例如 $f(0) = 3, f(1) = 1, f(2) = 4$。证明：$f \in \mathcal{GRF}$</p>
</blockquote>
<p>解答：
首先，我们有$\frac{1}{1+x^2} = \sum\limits_{i=0}^{n}(-1)^ix^{2i} + \frac{(-1)^{n+1}x^{2n+2}}{1+x^2}$
$\therefore \arctan x = \int_0^x\frac{\text{d}t}{1+t^2} =\sum\limits_{i=0}^{n}(-1)^i\int_0^xt^{2i}\text{d}t + \int_0^x\frac{(-1)^{n+1}}{1+t^2}t^{2n+2}\text{d}t$
$
=\sum\limits_{i=0}^{n}(-1)^i\frac{x^{2i+1}}{2i+1} + \int_0^x\frac{(-1)^{n+1}}{1+t^2}t^{2n+2}\text{d}t \quad \cdots (*)
$</p>
<p>由 Hutton’s Formula 知，
$
\frac{\pi}{4} = 2\arctan\frac{1}{3}+\arctan\frac{1}{7} \Rightarrow \pi = 8\arctan\frac{1}{3}+4\arctan\frac{1}{7}
$
在 (*) 式中取 $$n = 2k+1$$，这是使余项为正且估计更精确
$
\pi = 8 \sum\limits_{i=0}^{2k+1}(-1)^i\frac{1}{(2i+1)3^{2i+1}} + 8 \int_0^{\frac{1}{3}}\frac{t^{4k+4}}{1+t^2}\text{d}t + 4 \sum\limits_{i=0}^{2k+1}(-1)^i\frac{1}{(2i+1)7^{2i+1}}+ 4 \int_0^{\frac{1}{7}}\frac{t^{4k+4}}{1+t^2}\text{d}t
$
$
t_k =8 \sum\limits_{i=0}^{2k+1}(-1)^i\frac{1}{(2i+1)}\left(\frac{1}{3^{2i+1}} + \frac{1}{2 \cdot 7^{2i+1}}\right)
$
$
r_k =8 \int_0^{\frac{1}{3}}\frac{t^{4k+4}}{1+t^2}\text{d}t + 4\int_0^{\frac{1}{7}}\frac{t^{4k+4}}{1+t^2}\text{d}t
$
$
\leq 8 \int_0^{\frac{1}{3}}t^{4k+4}\text{d}t + 4\int_0^{\frac{1}{7}}t^{4k+4}\text{d}t
$
$
\leq 8 \cdot \frac{1}{3}\cdot \frac{1}{3^{4k+4}} + 4\cdot \frac{1}{7} \cdot \frac{1}{7^{4k+4}} \leq \frac{1}{3^{4k}} \leq \frac{1}{80^k}
$</p>
<p>因此，$\pi = t_k + r_k$，且 $0 &lt;r_k &lt; \frac{1}{80^k}$，$t$ 为有理数，设 $t_k$ 的十进制展开式为
$t_k = a_{k0}a_{k1} a_{k2} \cdots a_{kn} \cdots$
对于 $n \in \mathbb{N}$，存在 $l \geq n+1$ 使在 $t_l$ 中并非$a_{l,n+1}, a_{l, n+2}, \cdots, a_{l,l}$ 皆为 $9$，若不然，对任何 $l \geq n+1$，$a_l, a_{l,n+1}, a_{l, n+2}, \cdots, a_{l,l}$ 皆为 $9$。</p>
<p>$\because 10^{l}\pi = 10^lt_l + 10^lr_l$，$\therefore 10^lt_l &lt; 10^l \pi &lt; 10^lt_l+\frac{1}{8^l}$
这样在 $\pi$ 的展开式中，从某位起皆为 $9$，从而 $\pi$ 为有理数
令$l=l(n) = \mu l. (l\geq n+1$ 且在 $a_{l, n+1}, \cdots, a_{l,l}$ 中并非皆为 $9)$
$\because a(l,i) = a_{l, i} = t_l$ 展开式的第 $i$ 个数字 $\in \mathcal{EF}$
$\therefore l(n) = \mu l .((l \geq n+1) \wedge \prod\limits_{i = n+1}^l(a_{l,i}\dot{-}9 \neq 0)) \in\mathcal{GRF}$
（注：若知道 $\pi$ 展开式中连续 $9$ 的个数有上限，则 $l(n) \in \mathcal{EF}$）
我们有 $t_k &lt; \pi &lt; t_l+\frac{1}{80^l}$，
对于 $n \in \mathbb{N}$，取 $l = l(n)$
$\because a_{l, n+1}, \cdots, a_{l,l}$ 并非皆为 $9$，</p>
<p>$\therefore$ 设 $a_{l,m} &lt; 9$，这里 $n+1 \leq m \leq l$$，设 $$\pi = \pi_0\pi_1\pi_2\cdots$</p>
<p>从而 $t_l &lt; \pi &lt; t_l + \frac{1}{80^m}$，$10^mt_l &lt; 10^m\pi&lt;10^mt_l + \frac{1}{8^m}$</p>
<p>从而
$a_{l0}a_{l1}a_{l2}\cdots a_{ln}a_{l\overline{n+1}} \cdots a_{lm}a_{l\overline{m+1}} \cdots$
$&lt;\pi_0\pi_1\pi_2 \cdots \pi_n\pi_{n+1}\cdots \pi_m \pi_{m+1} \cdots$
$&lt; a_{l0}a_{l1}a_{l2}\cdots a_{ln}a_{l\overline{n+1}} \cdots a_{lm}a_{l\overline{m+1}} \cdots + \frac{1}{8^m}(m \geq 1)$
$&lt; a_{l0}a_{l1}a_{l2}\cdots a_{ln}a_{l\overline{n+1}} \cdots (a_{lm}+1)a_{l\overline{m+1}} \cdots$</p>
<p>因此，
$$
\begin{array}{rl}
a_{l0}a_{l1}\cdots a_{ln}a_{l\overline{n+1}} \cdots a_{lm} &amp; \leq \pi_0\pi_1\pi_2 \cdots \pi_n\pi_{n+1}\cdots \pi_m \
&amp; \leq a_{l0}a_{l1}a_{l2}\cdots a_{ln}a_{l\overline{n+1}} \cdots (a_{lm}+1)
\end{array}
$$
$\because m \geq n+1$， $\therefore \pi_n = a_{ln}$</p>
<p>因此，$f(n) = \pi_n = a(l(n), n) \in \mathcal{GRF}$。</p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>


    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/计算模型导引/" rel="tag"># 计算模型导引</a>
          
        </div>
      

      
        
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/03/18/DistributedSystem/paxos-algorithm.html" rel="next" title="Paxos分布式一致性算法">
                <i class="fa fa-chevron-left"></i> Paxos分布式一致性算法
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>

          
          </div>
          


          
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2017/05/01/Course/computational-models-1.html"
           data-title="计算模型导引——递归函数论" data-url="http://keyunluo.github.io/2017/05/01/Course/computational-models-1.html">
      </div>
    
    <script src="https://dn-hb0716.qbox.me/duoshuo.js"></script>
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/resource/img/profile.jpg"
               alt="浮舟沧海" />
          <p class="site-author-name" itemprop="name">浮舟沧海</p>
           
              <p class="site-description motion-element" itemprop="description">Coder On The Road</p>
          
        </div>
        <nav class="site-state motion-element">
        
          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">66</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">11</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">25</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/keyunluo" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/streamerset" target="_blank" title="微博">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  微博
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              Links
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item" style="margin-left: 8px; width:45%;">
                  <a href="http://keyunluo.github.io/algorithm" title="个人算法练习" target="_blank">个人算法练习</a>
                </li>
              
            </ul>
          </div>
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#知识点概要"><span class="nav-number">1.</span> <span class="nav-text">知识点概要</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#数论函数"><span class="nav-number">1.1.</span> <span class="nav-text">数论函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#配对函数"><span class="nav-number">1.2.</span> <span class="nav-text">配对函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#初等函数"><span class="nav-number">1.3.</span> <span class="nav-text">初等函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#原始递归函数"><span class="nav-number">1.4.</span> <span class="nav-text">原始递归函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#递归函数"><span class="nav-number">1.5.</span> <span class="nav-text">递归函数</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#习题"><span class="nav-number">2.</span> <span class="nav-text">习题</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1"><span class="nav-number">2.1.</span> <span class="nav-text">1.1</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2"><span class="nav-number">2.2.</span> <span class="nav-text">1.2</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3"><span class="nav-number">2.3.</span> <span class="nav-text">1.3</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-4"><span class="nav-number">2.4.</span> <span class="nav-text">1.4</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-5"><span class="nav-number">2.5.</span> <span class="nav-text">1.5</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-6"><span class="nav-number">2.6.</span> <span class="nav-text">1.6</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-7"><span class="nav-number">2.7.</span> <span class="nav-text">1.7</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-8"><span class="nav-number">2.8.</span> <span class="nav-text">1.8</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-9"><span class="nav-number">2.9.</span> <span class="nav-text">1.9</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-10"><span class="nav-number">2.10.</span> <span class="nav-text">1.10</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-11"><span class="nav-number">2.11.</span> <span class="nav-text">1.11</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-12"><span class="nav-number">2.12.</span> <span class="nav-text">1.12</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-13"><span class="nav-number">2.13.</span> <span class="nav-text">1.13</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-14"><span class="nav-number">2.14.</span> <span class="nav-text">1.14</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-15"><span class="nav-number">2.15.</span> <span class="nav-text">1.15</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-16"><span class="nav-number">2.16.</span> <span class="nav-text">1.16</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-17"><span class="nav-number">2.17.</span> <span class="nav-text">1.17</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-18"><span class="nav-number">2.18.</span> <span class="nav-text">1.18</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-19"><span class="nav-number">2.19.</span> <span class="nav-text">1.19</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-20"><span class="nav-number">2.20.</span> <span class="nav-text">1.20</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-21"><span class="nav-number">2.21.</span> <span class="nav-text">1.21</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-22"><span class="nav-number">2.22.</span> <span class="nav-text">1.22</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-23"><span class="nav-number">2.23.</span> <span class="nav-text">1.23</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-24"><span class="nav-number">2.24.</span> <span class="nav-text">1.24</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-25"><span class="nav-number">2.25.</span> <span class="nav-text">1.25</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2016 - 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">浮舟沧海</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>


        

<div class="busuanzi-count">

  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv"><i class="fa fa-user"></i><span class="busuanzi-value" id="busuanzi_value_site_uv"></span></span>
  

  
    <span class="site-pv"><i class="fa fa-eye"></i><span class="busuanzi-value" id="busuanzi_value_site_pv"></span></span>
  
  
</div>



        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    
    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"streamers"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    
    <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  













  
  
  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length == 0) {
      search_path = "search.xml";
    }
    var path = "/" + search_path;
    // monitor main search box;

    function proceedsearch() {
      $("body").append('<div class="local-search-pop-overlay">').css('overflow', 'hidden');
      $('.popup').toggle();
    }
    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';
      $.ajax({
        url: path,
        dataType: "xml",
        async: true,
        success: function( xmlResponse ) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = $( "entry", xmlResponse ).map(function() {
            return {
              title: $( "title", this ).text(),
              content: $("content",this).text(),
              url: $( "url" , this).text()
            };
          }).get();
          var $input = document.getElementById(search_id);
          var $resultContent = document.getElementById(content_id);
          $input.addEventListener('input', function(){
            var matchcounts = 0;
            var str='<ul class=\"search-result-list\">';
            var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
            $resultContent.innerHTML = "";
            if (this.value.trim().length > 1) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var content_index = [];
                var data_title = data.title.trim().toLowerCase();
                var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                var data_url = decodeURIComponent(data.url);
                var index_title = -1;
                var index_content = -1;
                var first_occur = -1;
                // only match artiles with not empty titles and contents
                if(data_title != '') {
                  keywords.forEach(function(keyword, i) {
                    index_title = data_title.indexOf(keyword);
                    index_content = data_content.indexOf(keyword);
                    if( index_title >= 0 || index_content >= 0 ){
                      isMatch = true;
                      if (i == 0) {
                        first_occur = index_content;
                      }
                    }

                  });
                }
                // show search results
                if (isMatch) {
                  matchcounts += 1;
                  str += "<li><a href='"+ data_url +"' class='search-result-title'>"+ data_title +"</a>";
                  var content = data.content.trim().replace(/<[^>]+>/g,"");
                  if (first_occur >= 0) {
                    // cut out 100 characters
                    var start = first_occur - 20;
                    var end = first_occur + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if(start == 0){
                      end = 50;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    var match_content = content.substring(start, end);
                    // highlight all keywords
                    keywords.forEach(function(keyword){
                      var regS = new RegExp(keyword, "gi");
                      match_content = match_content.replace(regS, "<b class=\"search-keyword\">"+keyword+"</b>");
                    });

                    str += "<p class=\"search-result\">" + match_content +"...</p>"
                  }
                  str += "</li>";
                }
              })};
            str += "</ul>";
            if (matchcounts == 0) { str = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>' }
            if (keywords == "") { str = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>' }
            $resultContent.innerHTML = str;
          });
          proceedsearch();
        }
      });}

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched == false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(function(e){
      $('.popup').hide();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    });
    $('.popup').click(function(e){
      e.stopPropagation();
    });
  </script>


  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("0jqhg9soB94ez37zCyJc9RC9-gzGzoHsz", "50xzSR3HFQzP8OokRhw3EdPK");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  


  

</body>
</html>
